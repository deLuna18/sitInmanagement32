<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="../static/w3.css">
    <link rel="stylesheet" href="../static/student_register.css">
</head>
<body>
    <div class="container w3-card-4 w3-white">
        <h2 class="w3-center">REGISTRATION</h2>
        
        <div id="message-container" class="mt-3">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>

        <form method="POST" class="w3-container">
            <fieldset class="w3-padding">
                <legend>Personal Information</legend>

                <label for="idno">ID Number:</label>
                <input class="w3-input w3-border" type="text" name="idno" id="idno" placeholder="Enter ID Number" required>

                <label for="lastname">Last Name:</label>
                <input class="w3-input w3-border" type="text" name="lastname" id="lastname" placeholder="Enter Last Name" required>

                <label for="firstname">First Name:</label>
                <input class="w3-input w3-border" type="text" name="firstname" id="firstname" placeholder="Enter First Name" required>

                <label for="middlename">Middle Name:</label>
                <input class="w3-input w3-border" type="text" name="middlename" id="middlename" placeholder="Enter Middle Name">
            </fieldset>

            <fieldset class="w3-padding">
                <legend>Academic Information</legend>

                <label for="course">Course:</label>
                <select class="w3-input w3-border" name="course" id="course" required>
                    <option value="" disabled selected>Select Course</option>
                    <option value="BSIT">BSIT</option>
                    <option value="BSCS">BSCS</option>
                    <option value="BSECE">BSECE</option>
                    <option value="BSBA">BSBA</option>
                    <option value="BSA">BSA</option>
                </select>

                <label for="year_level">Year & Level:</label>
                <input class="w3-input w3-border" type="text" name="year_level" id="year_level" placeholder="Enter Year & Level" required>
            </fieldset>

            <fieldset class="w3-padding">
                <legend>Account Information</legend>

                <label for="email_address">Email Address:</label>
                <input class="w3-input w3-border" type="email" name="email_address" id="email_address" placeholder="Enter Email Address" required>

                <label for="username">Username:</label>
                <input class="w3-input w3-border" type="text" name="username" id="username" placeholder="Username" required readonly>

                <label for="password">Password:</label>
                <input class="w3-input w3-border" type="password" name="password" id="password" placeholder="Enter Password" required>
            </fieldset>

            <button type="submit" class="w3-button">Register</button>
        </form>
        
        <p>Already have an account? <a href="{{ url_for('student_login') }}">Login</a></p>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <script>
        document.getElementById("idno").addEventListener("input", function () {
            let idnoField = this;
            let usernameField = document.getElementById("username");

            idnoField.value = idnoField.value.replace(/\D/g, '');

            usernameField.value = idnoField.value;
        });
    </script>
</body>
</html>
